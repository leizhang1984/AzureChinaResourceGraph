ResourceContainers | where type=='microsoft.resources/subscriptions'
| union  
Resources 
| where type=="microsoft.compute/virtualmachines"
| project subscriptionId,subscriptionName=name,resourceGroup,type,location,vmsize=properties.hardwareProfile.vmSize,
osType=properties.storageProfile.osDisk.osType,
publisher=properties.storageProfile.imageReference.publisher,offer=properties.storageProfile.imageReference.offer,
sku=properties.storageProfile.imageReference.sku,
osDisksizeInGB=properties.storageProfile.osDisk.diskSizeGB,
dataDisksizeInGB=properties.storageProfile.dataDisks[0].diskSizeGB
| sort by subscriptionId 

